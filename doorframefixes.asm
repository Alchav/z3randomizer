;================================================================================
; Door Frame Fixes
;================================================================================

;--------------------------------------------------------------------------------
; StoreLastEntranceID
;--------------------------------------------------------------------------------
StoreLastEntranceID:
	CPX #$003a : BCC .noStore
	TXA : SBC #$3a
	BRA .done
	.noStore
		LDA #$00
	.done
		STA $7F5099
		LDA $1BBB73, X : STA $010E		
RTL
;--------------------------------------------------------------------------------

;--------------------------------------------------------------------------------
; CacheDoorFrameData
;--------------------------------------------------------------------------------
CacheDoorFrameData:
	LDA $7F5099 : BEQ .originalBehaviour
	DEC : ASL : TAX
	LDA EntranceDoorFrameTable, X : STA $0696
	BRA .done
	.originalBehaviour
		LDA $D724, X : STA $0696
	.done
		STZ $0698
		LDA #$00
		STA $7F5099
RTL
;--------------------------------------------------------------------------------

;--------------------------------------------------------------------------------
; WalkDownIntoTavern
;--------------------------------------------------------------------------------
WalkDownIntoTavern:
	LDA $7F5099
	CMP #$08
RTL
;--------------------------------------------------------------------------------
